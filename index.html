<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no" />
    
    <!-- Fallback refresh for stuck pages -->
    <script>
      setTimeout(function() {
        if (document.getElementById('initial-loading') && document.getElementById('initial-loading').style.display !== 'none') {
          console.warn('Page appears stuck, attempting recovery');
          document.body.innerHTML = '<div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;"><h2>Loading...</h2><p>If this persists, please refresh the page.</p><button onclick="location.reload()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Refresh Now</button></div>';
        }
      }, 10000);
    </script>
    
    <!-- Safe mode detection and emergency font fix -->
    <script>
      (function() {
        var ua = navigator.userAgent;
        var androidMatch = ua.match(/Android (\d+(?:\.\d+)?)/);
        var isOldAndroid = androidMatch && parseFloat(androidMatch[1]) <= 10;
        var forceFullVersion = localStorage.getItem('force-full-version') === 'true';
        
        if (isOldAndroid && !forceFullVersion) {
          console.log('ðŸ›¡ï¸ Old Android detected, preparing safe mode');
          
          // Mark as safe mode
          document.documentElement.setAttribute('data-safe-mode', 'true');
          
          // Apply safe styles immediately
          var safeStyle = document.createElement('style');
          safeStyle.textContent = `
            * { 
              font-family: Arial, Helvetica, sans-serif !important; 
              box-sizing: border-box;
            }
            body { 
              margin: 0; 
              padding: 0; 
              background: white; 
              font-family: Arial, Helvetica, sans-serif !important; 
            }
            #initial-loading {
              font-family: Arial, Helvetica, sans-serif !important;
            }
          `;
          document.head.appendChild(safeStyle);
          
          // Block ALL font loading
          window.FontFace = function() { 
            console.log('FontFace blocked in safe mode');
            return { load: function() { return Promise.resolve(); } }; 
          };
          
          // Block font loading in document.fonts
          Object.defineProperty(document, 'fonts', {
            value: {
              add: function() { console.log('Font add blocked in safe mode'); },
              load: function() { console.log('Font load blocked in safe mode'); return Promise.resolve(); },
              check: function() { return false; },
              ready: Promise.resolve()
            }
          });
          
          // Nuclear error handler - prevent ANY font errors
          window.addEventListener('error', function(e) {
            if (e.message && (
              e.message.includes('font') || 
              e.message.includes('CFF') || 
              e.message.includes('OTS') ||
              e.message.includes('Invalid font data') ||
              e.message.includes('Failed to parse table')
            )) {
              console.warn('Font error blocked in safe mode:', e.message);
              e.stopImmediatePropagation();
              e.preventDefault();
              return false;
            }
          }, true);
          
        } else if (isOldAndroid) {
          console.log('ðŸš¨ Old Android with forced full version, applying emergency font fix');
          
          // Apply emergency font fixes for forced full version
          var style = document.createElement('style');
          style.textContent = '* { font-family: system-ui, -apple-system, Roboto, Arial, sans-serif !important; }';
          document.head.appendChild(style);
          
          // Block font loading APIs
          if (window.FontFace) {
            window.FontFace = function() { return { load: function() { return Promise.resolve(); } }; };
          }
          
          // Add error handler
          window.addEventListener('error', function(e) {
            if (e.message && (e.message.includes('font') || e.message.includes('CFF') || e.message.includes('OTS'))) {
              console.warn('Font error blocked:', e.message);
              e.stopPropagation();
              e.preventDefault();
              return false;
            }
          }, true);
        }
      })();
    </script>
    
    <!-- Mobile Web App Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Mobileuurka" />
    <meta name="application-name" content="Mobileuurka" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    
    <!-- Mobile SEO Optimization -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="MobileOptimized" content="width" />
    
    <meta name="description" content="Comprehensive healthcare management platform for patient records, clinical workflows, and medical data tracking. Streamline your healthcare operations with Mobileuurka." />
    <meta name="keywords" content="healthcare management, patient records, clinical workflows, medical data, healthcare software, patient management system, electronic health records, EHR, medical records, healthcare operations, clinical documentation, patient care, medical facility management, healthcare technology, patient tracking, medical workflow automation" />
    <meta name="author" content="Mobileuurka" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://mobileuurka-gcp-server-v2-864851114868.europe-west4.run.app" />
    <title>Mobileuurka - Healthcare Management System</title>
    
    <!-- Open Graph Meta Tags for Social Media Sharing -->
    <meta property="og:title" content="Mobileuurka - Professional Healthcare Management Platform" />
    <meta property="og:description" content="Streamline your healthcare operations with Mobileuurka's comprehensive platform for patient records, clinical workflows, and medical data management. Trusted by healthcare professionals for efficient patient care." />
    <meta property="og:image" content="https://mobileuurka-gcp-server-v2-864851114868.europe-west4.run.app/logo.png" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://mobileuurka-gcp-server-v2-864851114868.europe-west4.run.app" />
    <meta property="og:site_name" content="Mobileuurka" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Mobileuurka - Healthcare Management System" />
    <meta name="twitter:description" content="Comprehensive healthcare management platform for patient records, clinical workflows, and medical data tracking. Streamline your healthcare operations." />
    <meta name="twitter:image" content="https://mobileuurka-gcp-server-v2-864851114868.europe-west4.run.app/logo.png" />
    
    <!-- Structured Data Markup for Search Engines -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Mobileuurka",
      "applicationCategory": "HealthApplication",
      "applicationSubCategory": "Electronic Health Records",
      "description": "Comprehensive healthcare management platform for patient records, clinical workflows, and medical data tracking. Streamline your healthcare operations with Mobileuurka.",
      "url": "https://mobileuurka-gcp-server-v2-864851114868.europe-west4.run.app",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "category": "Healthcare Software",
        "description": "Professional healthcare management system for medical facilities"
      },
      "creator": {
        "@type": "Organization",
        "name": "Mobileuurka"
      },
      "featureList": [
        "Patient Records Management",
        "Clinical Workflows",
        "Medical Data Tracking",
        "Healthcare Operations Management",
        "Electronic Health Records"
      ]
    }
    </script>
  </head>
  <body>
    <div id="root">
      <!-- Loading screen with safe fonts -->
      <div id="initial-loading" style="
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, Helvetica, sans-serif;
        background: white;
        flex-direction: column;
        padding: 20px;
        text-align: center;
      ">
        <div style="
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #007bff;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 20px;
        "></div>
        <h2 style="
          color: #333;
          font-size: 24px;
          font-family: Arial, Helvetica, sans-serif;
          margin: 10px 0;
        ">Mobileuurka</h2>
        <p id="loading-message" style="
          color: #666;
          font-size: 16px;
          font-family: Arial, Helvetica, sans-serif;
          margin: 10px 0;
        ">Loading...</p>
        <p id="safe-mode-message" style="
          color: #007bff;
          font-size: 14px;
          font-family: Arial, Helvetica, sans-serif;
          margin: 10px 0;
          display: none;
        ">Optimizing for your device...</p>
      </div>
    </div>
    
    <script>
      // Update loading message for safe mode
      if (document.documentElement.getAttribute('data-safe-mode') === 'true') {
        setTimeout(function() {
          document.getElementById('loading-message').textContent = 'Preparing compatibility mode...';
          document.getElementById('safe-mode-message').style.display = 'block';
        }, 500);
      }
    </script>
    
    <style>
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      /* Hide loading screen once React takes over */
      #root:not(:empty) #initial-loading {
        display: none;
      }
    </style>
    
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
